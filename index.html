<!DOCTYPE html>
<html>

<head>
 <!--

 
 <script type="text/javascript">
_linkedin_partner_id = "6418300";
window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
window._linkedin_data_partner_ids.push(_linkedin_partner_id);
</script><script type="text/javascript">
(function(l) {
if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
window.lintrk.q=[]}
var s = document.getElementsByTagName("script")[0];
var b = document.createElement("script");
b.type = "text/javascript";b.async = true;
b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
s.parentNode.insertBefore(b, s);})(window.lintrk);
</script>
<noscript>
<img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=6418300&fmt=gif" />
</noscript>

 
--> 
  <title>Test Server</title>
  <style>
    body {
      margin: 0 auto;
      width: 50%;
    }

    /* CSS Element Selector */
    button {
      background-color: lightblue;
    }

    #sendEvent {
      margin-bottom: 15px;
    }

    /* CSS Id Selector */
    #addToCart {
      background-color: lightgreen;
    }

    /* CSS Class Selector */
    .customClass {
      font-weight: bold;
    }

    /* CSS Group Selector */
    h1,
    h2 {
      color: purple;
      text-align: center;
    }

    h3 {
      margin-top: 0;
    }

    .center {
      text-align: center;
    }
  </style>
</head>

<body>
 
 
  <h1>Welcome to PhotoniqEST test!</h1>
  <div class="center">
    <button id="sendEvent">Click me to send event!</button><br>
  </div>
  <h2>Form Submission</h2>
  <form id="myForm" class="center">
    <div style="margin-bottom: 15px">
      <label for="fname">First name:</label>
      <input type="text" id="fname" name="fname">
    </div>
    <div>
      <label for="lname">Last name:</label>
      <input type="text" id="lname" name="lname">
    </div>
    <div style="margin-top: 15px"><input type="submit" value="Submit"></div>
  </form><br>
  <h2>Ecommerce test</h2>
  <div>
    <div class="center" style="display: inline-block; width: 48%">
      <table style="width: 100%;">
        <tr>
          <td>
            <div class="productId">prodId5555</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="productCost">600</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="checkoutId" name="checkout7777">checkout7777</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="orderId">order454545</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="total">700</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="revenue">800</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="shipping">200</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="tax">60</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="discount">20</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="sku" value="24">24</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="name">Nokia</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="price">1000</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="quantity">2</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="category">Cell Phone</div>
          </td>
        </tr>
      </table>
    </div>
    <div class="center" style="display: inline-block; width: 48%">
      <table style="width: 100%;">
        <tr>
          <td>
            <div class="productId">prodId4444</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="productCost">650</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="checkoutId" name="checkout141414">checkout141414</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="orderId">order131313</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="total">900</div>
          </td>
        </tr>
        <tr>
          <td>
            <div id="revenue">1000</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="shipping">150</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="tax">35</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="discount">25</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="sku" value="13">13</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="name">Google Pixel</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="price">2000</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="quantity">3</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="category">Cell Phone</div>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="center" style="margin-bottom: 50px;">
    <button id="purchase">Purchase!</button>
    <button id="productId">1234567890</button>
    <button id="productCost">300</button>
  </div>
  <h2>Product Catalog</h2>
  <div class="center" style="margin-bottom: 50px;">
    <div id="product1" style="display: inline-block; margin-right: 20px;">
      <h3>Product 1</h3>
      <p>Product description</p>
      <button type="button" id="addToCart">Add to Cart</button>
    </div>
    <div id="product2" style="display: inline-block">
      <h3>Product 2</h3>
      <p>Product description</p>
      <button type="button" id="addToCartProduct2">Add to Cart</button>
    </div>
  </div>
  <h2>Apply Coupon</h2>
  <form id="applyCouponForm" class="center" style="margin-bottom: 50px;">
    <label for="coupon">Enter your coupon code:</label>
    <input type="text" id="coupon" name="coupon">
    <input type="submit" value="Apply Coupon">
  </form>

  <div class="center" style="margin-bottom: 50px;">
    <a href="/list.html">Go to List</a>
  </div>
  <!-- Examples of different CSS selectors -->

 <script>
     // Function to parse query parameters
     function getQueryParam(param) {
       const urlParams = new URLSearchParams(window.location.search);
       return urlParams.get(param);
     }
     // Function to inject a script
     function injectScript(src, isAsync = true) {
       const script = document.createElement("script");
       script.src = src;
       script.async = isAsync;
       document.head.appendChild(script);
}
     // Function to handle the EST case
     function handleEST() {
   fetch(`https://milestone.photoniq.macrometa.io/api/est/v1/tracker/in
   ject-script`)
         .then((response) => response.text())
         .then((data) => {
           const { execute } = JSON.parse(data);
           let script = document.createElement("script");
           script.textContent = execute;
           document.body.appendChild(script);
           photoniqest.settings("pageview").then(() => {
             photoniqest._processServerResponse({ pageVars: [], fetch: [],
   execute: [] });
   31
 }); })
      .catch((error) => {
        console.error("Error fetching injected code:", error);
}); }
  // Function to inject third-party tags
  function injectThirdPartyTags() {
    // Inject Facebook Pixel
    !function(f, b, e, v, n, t, s) {
      if (f.fbq) return;
      n = f.fbq = function() {
        n.callMethod ? n.callMethod.apply(n, arguments) :
n.queue.push(arguments);
      };
      if (!f._fbq) f._fbq = n;
      n.push = n;
      n.loaded = !0;
      n.version = '2.0';
      n.queue = [];
      t = b.createElement(e);
      t.async = !0;
      t.src = v;
      s = b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t, s);
    }(window, document, 'script',
'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '2183991285135209');
    fbq('track', 'PageView');
    // Inject Google Tag Manager
    injectScript("https://www.googletagmanager.com/gtag/js?id=G-SQJY85KDM3");
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'G-SQJY85KDM3');
    // Inject Google Floodlight Tag
    (function() {
      var axel = Math.random() + "";
      var a = axel * 10000000000000;
      var tag = document.createElement("iframe");
      tag.src =
"https://fls.doubleclick.net/activityi;src=594124197;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=" + a
+ "?";
      tag.width = "1";
      tag.height = "1";
32

       tag.style = "display:none";
      document.body.appendChild(tag);
    })();
    // Inject Google Ads Remarketing and Conversion Tracking
    injectScript("https://www.googletagmanager.com/gtag/js?id=AW-594124197");
    gtag('config', 'AW-594124197');
    gtag('event', 'remarketing', {
      'send_to': 'AW-594124197'
    });
    gtag('event', 'conversion', {
      'send_to': 'AW-594124197/abcDEFghiJKL',
      'transaction_id': ''  // Optional: Include transaction ID for e-commerce
tracking, leave empty if not applicable
}); }
// Main logic
  const est = getQueryParam('est');
  if (est === 'true') {
    console.log("EST script triggered");
    handleEST();
  } else {
    console.log("Third-party scripts triggered");
    injectThirdPartyTags();
  }
</script>
<!--
  Replace the following mock IDs with your actual values:
  - FBQ-XXXXXXXXXX (Facebook Pixel ID)
  - GTM-YYYYYYYYYY (Google Tag Manager ID)
  - FLD-XXXXXXXXXX, FLD-YYYYYYYYYY, FLD-ZZZZZZZZZZ (Floodlight IDs: src, type,
category)
  - AW-XXXXXXXXXX (Google Ads ID)
  - AW-XXXXXXXXXX/abcDEFghiJKL (Google Ads Conversion Tracking ID)
  - 'transaction_id': '' (Optional: Include a unique transaction ID for
tracking purchases, leave empty if not needed)
-->

 
  <!-- Additional Elements for Testing -->
  <div class="center">
    <button class="customClass">Click me (Custom Class)!</button>
    <p>Universal Selector Example</p>
  </div>

</body>

</html>
